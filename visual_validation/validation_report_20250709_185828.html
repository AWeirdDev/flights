
<!DOCTYPE html>
<html>
<head>
    <title>Flight Parser Visual Validation Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .metric { display: inline-block; margin: 10px 20px 10px 0; }
        .metric .value { font-size: 24px; font-weight: bold; }
        .metric .label { color: #666; }
        table { border-collapse: collapse; width: 100%; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f5f5f5; }
        .success { background-color: #d4edda; }
        .warning { background-color: #fff3cd; }
        .error { background-color: #f8d7da; }
        .flight-sample { margin: 10px 0; padding: 10px; background: #f9f9f9; }
        img { max-width: 100%; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Flight Parser Visual Validation Report</h1>
    <p>Generated: 2025-07-09 18:59:02</p>
    
    <div class="section">
        <h2>Parser Comparison</h2>
        <div class="metric">
            <div class="value">26</div>
            <div class="label">JS Parser Flights</div>
        </div>
        <div class="metric">
            <div class="value">51</div>
            <div class="label">HTML Parser Flights</div>
        </div>
        <div class="metric">
            <div class="value">26</div>
            <div class="label">Hybrid Parser Flights</div>
        </div>
        <div class="metric">
            <div class="value">54</div>
            <div class="label">HTML Enrichments</div>
        </div>
    </div>
    
    <div class="section">
        <h2>Visual Counts</h2>
        <div class="metric">
            <div class="value">4</div>
            <div class="label">Flight Containers</div>
        </div>
        <div class="metric">
            <div class="value">54</div>
            <div class="label">Total Flight Items</div>
        </div>
        <div class="metric">
            <div class="value">156</div>
            <div class="label">Visible Prices</div>
        </div>
        <p>Items per container: [5, 22, 5, 22]</p>
    </div>
    
    <div class="section">
        <h2>Discrepancy Analysis</h2>
        <table>
            <tr>
                <th>Metric</th>
                <th>Value</th>
                <th>Status</th>
            </tr>
            <tr class="error">
                <td>JS vs HTML flight count</td>
                <td>26 vs 51 (diff: 25)</td>
                <td>Mismatch</td>
            </tr>
            <tr class="success">
                <td>Hybrid vs JS flight count</td>
                <td>26 vs 26</td>
                <td>Match</td>
            </tr>
            <tr>
                <td>Visual items vs HTML flights</td>
                <td>54 vs 51</td>
                <td>Close</td>
            </tr>
        </table>
    </div>
    
    <div class="section">
        <h2>Visual Flight Samples</h2>
        <p>First 5 flights as extracted visually from the page:</p>
        
        <div class="flight-sample">
            <h4>Visual Flight 1</h4>
            <table>
                <tr>
                    <td><strong>Airline:</strong> United</td>
                    <td><strong>Departure:</strong> 11:00 AM on Fri, Aug 22</td>
                    <td><strong>Arrival:</strong> 12:22 PM on Fri, Aug 22</td>
                </tr>
                <tr>
                    <td><strong>Price:</strong> $65</td>
                    <td><strong>Stops:</strong> Nonstop</td>
                    <td><strong>+Days:</strong> N/A</td>
                </tr>
            </table>
        </div>
            
        <div class="flight-sample">
            <h4>Visual Flight 2</h4>
            <table>
                <tr>
                    <td><strong>Airline:</strong> United</td>
                    <td><strong>Departure:</strong> 1:00 PM on Fri, Aug 22</td>
                    <td><strong>Arrival:</strong> 2:22 PM on Fri, Aug 22</td>
                </tr>
                <tr>
                    <td><strong>Price:</strong> $65</td>
                    <td><strong>Stops:</strong> Nonstop</td>
                    <td><strong>+Days:</strong> N/A</td>
                </tr>
            </table>
        </div>
            
        <div class="flight-sample">
            <h4>Visual Flight 3</h4>
            <table>
                <tr>
                    <td><strong>Airline:</strong> United</td>
                    <td><strong>Departure:</strong> 2:00 PM on Fri, Aug 22</td>
                    <td><strong>Arrival:</strong> 3:22 PM on Fri, Aug 22</td>
                </tr>
                <tr>
                    <td><strong>Price:</strong> $65</td>
                    <td><strong>Stops:</strong> Nonstop</td>
                    <td><strong>+Days:</strong> N/A</td>
                </tr>
            </table>
        </div>
            
        <div class="flight-sample">
            <h4>Visual Flight 4</h4>
            <table>
                <tr>
                    <td><strong>Airline:</strong> United</td>
                    <td><strong>Departure:</strong> 2:59 PM on Fri, Aug 22</td>
                    <td><strong>Arrival:</strong> 4:21 PM on Fri, Aug 22</td>
                </tr>
                <tr>
                    <td><strong>Price:</strong> $65</td>
                    <td><strong>Stops:</strong> Nonstop</td>
                    <td><strong>+Days:</strong> N/A</td>
                </tr>
            </table>
        </div>
            
        <div class="flight-sample">
            <h4>Visual Flight 5</h4>
            <table>
                <tr>
                    <td><strong>Airline:</strong> United</td>
                    <td><strong>Departure:</strong> 3:59 PM on Fri, Aug 22</td>
                    <td><strong>Arrival:</strong> 5:21 PM on Fri, Aug 22</td>
                </tr>
                <tr>
                    <td><strong>Price:</strong> $65</td>
                    <td><strong>Stops:</strong> Nonstop</td>
                    <td><strong>+Days:</strong> N/A</td>
                </tr>
            </table>
        </div>
            
    </div>
    
    <div class="section">
        <h2>Enrichment Analysis</h2>
        <table>
            <tr>
                <th>Enrichment Type</th>
                <th>Count</th>
                <th>Percentage</th>
            </tr>
            <tr>
                <td>With arrival_time_ahead</td>
                <td>0</td>
                <td>0.0%</td>
            </tr>
            <tr>
                <td>With emissions</td>
                <td>52</td>
                <td>96.3%</td>
            </tr>
            <tr>
                <td>With operated_by</td>
                <td>26</td>
                <td>48.1%</td>
            </tr>
        </table>
    </div>
    
    <div class="section">
        <h2>Hybrid Parser Performance</h2>
        
        <table>
            <tr>
                <th>Field</th>
                <th>HTML Parser</th>
                <th>Hybrid Parser</th>
                <th>Status</th>
            </tr>
            <tr class="success">
                <td>arrival_time_ahead</td>
                <td>0 (0.0%)</td>
                <td>0 (0.0%)</td>
                <td>✓</td>
            </tr>
        </table>
        
        <h3>Key Findings</h3>
        <ul>
            <li>JS parser finds 26 flights while HTML finds 51 (diff: 25)</li>
            <li>Visual count shows 54 flight items on page</li>
            <li>HTML enrichments: 54 items, 0 with arrival_time_ahead</li>
            <li>Hybrid mode extracts 0 arrival_time_ahead vs HTML's 0</li>
        </ul>
    </div>
    
    <div class="section">
        <h2>Screenshots</h2>
        <p>Check the output directory for:</p>
        <ul>
            <li>full_page_20250709_185828.png - Full page screenshot</li>
            <li>container_0_20250709_185828.png - First flight container</li>
            <li>container_1_20250709_185828.png - Second flight container</li>
            <li>container_2_20250709_185828.png - Third flight container</li>
        </ul>
    </div>
</body>
</html>
        